## ğŸ‘‹å‰è¨€ 

ã€€ã€€è¯¥å¼•æ“è®¾è®¡ç”¨é€”æ˜¯ JVM ç«¯æ§åˆ¶å°å°æ¸¸æˆå¼€å‘ï¼Œä¹Ÿå¯ç”¨äºå…¶å®ƒç”¨é€”ï¼Œç›®å‰å®ç°äº†åœ¨æ§åˆ¶å°ä¸­æ˜¾ç¤ºâ€œBad Appleâ€çš„åŠŸèƒ½ã€‚

[ç®€ä½“ä¸­æ–‡](README.md) | [English](README_en.md)

âœ¨ **Demo**

https://user-images.githubusercontent.com/41804496/231933915-4928c5a4-e8c7-47f1-b411-90396c27a5e8.mp4


ğŸ› ï¸ç›®å‰å¼•æ“æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š

- ä»»æ„ä½ç½®å¡«å……å­—ç¬¦ä¸²
- ä»»æ„ä½ç½®ä¿®æ”¹æ–‡æœ¬å±æ€§
- ç›‘å¬é”®ç›˜å’Œé¼ æ ‡çš„æŒ‰é”®
- æ— é—ªå±åˆ·æ–°ï¼ˆå¤šç¼“å†²ï¼‰

âš ï¸æ³¨æ„ï¼šå¼•æ“ç›®å‰åªèƒ½åœ¨ **Windows** å¹³å°ä½¿ç”¨ï¼Œä¸æ”¯æŒå…¶å®ƒå¹³å°ï¼

ã€€ã€€ä¸‹é¢æˆ‘ä»¬å¼€å§‹è¯´æ˜å¼•æ“çš„ä½¿ç”¨æ–¹æ³•ã€‚

## âš™ï¸åˆå§‹åŒ–å’Œé”€æ¯ 

ã€€ã€€ä½¿ç”¨å¼•æ“ä¹‹å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–æ§åˆ¶å°çš„ä¿¡æ¯ï¼Œ `GMap.Builder` ä¸­å·²ç»å°è£…å¥½äº†åˆå§‹åŒ–çš„æ–¹æ³•ï¼Œè°ƒç”¨ `GMap.Builder.build()` æ—¶ä¼šè‡ªåŠ¨åˆå§‹åŒ–æ§åˆ¶å°ä¿¡æ¯ã€‚

ã€€ã€€æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ `ConsolePrinter.init` è¿›è¡Œæ‰‹åŠ¨åˆå§‹åŒ–ï¼Œ ä½†æ˜¯ **è¯·æ³¨æ„** ï¼šå¦‚æœå·²ç»é€šè¿‡ `GMap.Builder` è¿›è¡Œäº†åˆå§‹åŒ–æ“ä½œï¼Œè¯·å‹¿é€šè¿‡ `ConsolePrinter.init` é‡å¤åˆå§‹åŒ–ã€‚

ã€€ã€€å¦‚æœæ¸¸æˆå·²ç»ç»“æŸéœ€è¦é€€å‡ºæ§åˆ¶å°ï¼Œåˆ™éœ€è°ƒç”¨ `GMap.Builder.dispose()` é”€æ¯æ§åˆ¶å°ï¼Œæ­£å¦‚æ³¨é‡Šä¸­æ‰€è¯´çš„ä¸€æ ·ï¼Œè¯¥å‡½æ•°åªæœ‰åœ¨æ‰€æœ‰çš„ `GMap` å¯¹è±¡è¢«è™šæ‹Ÿæœºå›æ”¶æˆ–è°ƒç”¨ `close()` å‡½æ•°åæ‰ä¼šé”€æ¯æ§åˆ¶å°ï¼Œè¿™ä¸ªè®¾è®¡æ˜¯ä¸ºäº†é˜²æ­¢æ§åˆ¶å°è¢«é”€æ¯åç»§ç»­é€šè¿‡ `GMap` æ“ä½œæ§åˆ¶å°ï¼Œä»è€Œå¯¼è‡´ç¨‹åºå´©æºƒã€‚

ã€€ã€€å¦‚æœéœ€è¦å¼ºåˆ¶é”€æ¯ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨ `ConsolePrinter.dispose()` ï¼Œè¿™ä¸ªå‡½æ•°ä¸ä¼šè¿›è¡Œé”€æ¯æ£€æŸ¥ï¼Œä½†æ˜¯åŠ¡å¿…æ³¨æ„é”€æ¯æ§åˆ¶å°åä¸èƒ½å†é€šè¿‡å¼•æ“å¯¹æ§åˆ¶å°è¿›è¡Œæ“ä½œã€‚

ã€€ã€€PSï¼šæ§åˆ¶å°é”€æ¯åå¯ä»¥é‡æ–°åˆå§‹åŒ–ã€‚

ã€€ã€€ä»£ç ç¤ºä¾‹ï¼š

ğŸ””æ¯ä¸ªæ¨¡å—éƒ½å°†æä¾›**Kotlin** / **Java** ä¸¤ç§è¯­è¨€çš„ä»£ç ç¤ºä¾‹

**Kotlin**

```Kotlin
fun main() {
    GMap.Builder.apply {
        width = 80
        height = 40
    }.build().use {
        // do something
        // é€šè¿‡æŸç§æ–¹æ³•é˜»å¡ä¸»çº¿ç¨‹ç›´åˆ°ç¨‹åºç»“æŸ
    }
    GMap.Builder.dispose()
}
```

**Java**

```Java
public class Main {

    public static void main(String[] args) {
        GMap.BuilderJava.INSTANCE
                .setWidth(80)
                .setHeight(40);
        try (GMap map = GMap.Builder.build()) {
            // do something
            // é€šè¿‡æŸç§æ–¹æ³•é˜»å¡ä¸»çº¿ç¨‹ç›´åˆ°ç¨‹åºç»“æŸ
        }
        GMap.Builder.dispose();
    }

}
```

ã€€ã€€ä¸Šè¿°ä»£ç ä½¿ç”¨ `Builder` åˆ›å»ºäº†ä¸€ä¸ªæ¨ªå‘ 80 ä¸ªå­—ç¬¦ï¼Œçºµå‘ 40 ä¸ªå­—ç¬¦çš„åœ°å›¾ï¼Œ `BuilderJava` æ˜¯ä¸º Java è¯­è¨€ç‰¹åŒ–çš„ç±»ï¼Œç”¨äºä¼˜åŒ– Java çš„è°ƒç”¨ä½“éªŒï¼Œå¯ä»¥ä¸ `Builder` ç±»æ··ç”¨ã€‚

ã€€ã€€æ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç» `Builder` ä¸­å„ä¸ªå­—æ®µçš„ä½œç”¨ï¼ˆæ‹¬å·ä¸­ä¸ºç¼ºçœå€¼ï¼‰ï¼š

- `width` - æ¨ªå‘å­—ç¬¦æ•°é‡
- `height` - çºµå‘å­—ç¬¦æ•°é‡
- `fontWidth` - å­—ç¬¦å®½åº¦ï¼ˆ10ï¼‰
- `cache` - ç¼“å­˜æ•°é‡ï¼ˆ2ï¼‰
- `ignoreClose` - æ˜¯å¦å¿½ç•¥ `Ctrl + C` ä¸€ç±»çš„æ§åˆ¶å¿«æ·é”®ï¼ˆfalseï¼‰
- `file` - DLL æ–‡ä»¶çš„è·¯å¾„ï¼ˆ `./utils.dll` ï¼‰

ã€€ã€€ç”±äºæ§åˆ¶å°é™åˆ¶ï¼Œå­—ç¬¦å®½åº¦åªèƒ½ä¿è¯å­—ç¬¦å®½åº¦ä¸è®¾ç½®çš„å€¼æ¥è¿‘ï¼Œå¹¶ä¸èƒ½ä¿è¯æ’ç­‰äºè®¾ç½®çš„å€¼ã€‚ç†æƒ³çš„æ‹‰ä¸å­—ç¬¦å®½é«˜æ¯”ä¸º `1:2` ï¼Œä¸­æ–‡å­—ç¬¦å®½é«˜æ¯”ä¸º `1:1` ï¼Œåœ¨æœ‰äº›æ—¶å€™ä¼šåç¦»è¿™ä¸ªæ¯”ä¾‹ï¼Œå¦‚æœå¸Œæœ›è¾¾åˆ°å®Œç¾æ¯”ä¾‹ï¼Œéœ€è¦è°ƒæ•´ `fontWidth` çš„å€¼ã€‚

## âŒ¨ï¸é”®é¼ ç›‘å¬ 

ã€€ã€€å¼•æ“æ”¯æŒç›‘å¬é”®ç›˜å’Œé¼ æ ‡çš„æŒ‰é”®è¾“å…¥ï¼ˆæš‚ä¸æ”¯æŒé¼ æ ‡åæ ‡ç›‘å¬ï¼‰ï¼Œç›¸å…³å‡½æ•°å‡å°è£…åœ¨ `EventListener` ä¸­ï¼Œè°ƒç”¨ `pushEvent()` å‡½æ•°å³å¯å‘å¸ƒä¸€æ¬¡é”®ç›˜äº‹ä»¶ã€‚

ã€€ã€€å¯ä»¥é€šè¿‡ `registry...` å‡½æ•°æ³¨å†Œäº‹ä»¶ï¼š

- `registryKeyboardEvent` - æ³¨å†Œé”®ç›˜äº‹ä»¶
- `registryMouseEvent` - æ³¨å†Œé¼ æ ‡äº‹ä»¶

ã€€ã€€ä¸¤ä¸ªå‡½æ•°å‡æœ‰å¯¹åº”çš„ `remove` å‡½æ•°ï¼Œå¯ä»¥ç”¨äºç§»é™¤æŒ‡å®šäº‹ä»¶ã€‚

ã€€ã€€ä¸‹é¢ç»™å‡ºç›‘å¬äº‹ä»¶çš„ç¤ºä¾‹ä»£ç ï¼š

**Kotlin**

```Kotlin
fun main() {
    EventListener.registryKeyboardEvent(object : IKeyboardListener {
        
        override fun onPressed(code: Int) {
            println("pressed: $code")
        }

        override fun onReleased(code: Int) {
            println("released: $code")
        }

        override fun onActive(code: Int) { }
        
    })
    while (true) {
        EventListener.pushEvent()
        Thread.sleep(10)
    }
}
```

**Java**

```Java
public class Main {

    public static void main(String[] args) {
        EventListener.registryKeyboardEvent(new IKeyboardListener() {
            
            @Override
            public void onPressed(int code) {
                System.out.println("pressed: " + code);
            }

            @Override
            public void onReleased(int code) {
                System.out.println("released: " + code);
            }

            @Override
            public void onActive(int code) { }
            
        });
        while (true) {
            EventListener.pushEvent();
            try {
                Thread.sleep(50);
            } catch (InterruptedException ignored) {
            }
        }
    }

}
```

è¯·æ³¨æ„ï¼šè°ƒç”¨ `pushEvent` çš„æ—¶å€™ï¼Œå¼•æ“åªèƒ½æ£€æµ‹å½“å‰æŒ‰ä¸‹çš„æŒ‰é”®ï¼Œæ— æ³•æ£€æµ‹è°ƒç”¨ `pushEvent` ä¹‹å‰æŒ‰ä¸‹çš„æŒ‰é”®ï¼Œå¦‚æœä¸¤æ¬¡ `pushEvent` è°ƒç”¨çš„æ—¶é—´é—´éš”è¿‡å¤§ï¼Œä¼šéå¸¸å®¹æ˜“æ¼æ‰ä¸€äº›è¾“å…¥ï¼Œæ‰€ä»¥åº”å½“é€‚å½“æé«˜è°ƒç”¨é¢‘ç‡ã€‚

## ğŸ’¿è‡ªå®šä¹‰å®ä½“ 

ã€€ã€€å¼•æ“ä¸­æ‰€æœ‰å†…å®¹éƒ½è¢«è®¾è®¡ä¸ºâ€œå®ä½“â€ï¼Œå®ä½“æœ‰å››ä¸ªé€šç”¨å±æ€§ï¼š

- `visible` - æ ‡è®°å®ä½“æ˜¯å¦å¯è§ï¼Œä¸º `false` æ—¶å°†è·³è¿‡æ¸²æŸ“
- `collisible` - æ ‡è®°å®ä½“æ˜¯å¦å…·æœ‰ç¢°æ’ç®±ï¼Œä¸º `false` æ—¶å°†è·³è¿‡ç¢°æ’ç®±æ£€æµ‹
- `died` - æ ‡è®°å®ä½“æ˜¯å¦æ­»äº¡ï¼Œä¸º `true` æ—¶å°†è‡ªåŠ¨ä»åœ°å›¾ä¸­ç§»é™¤
- `x/y/width/height` - åæ ‡å’Œå°ºå¯¸ä¿¡æ¯

ã€€ã€€å®ä½“ï¼ˆ `GEntity` ï¼‰ä¸­æä¾›äº†ä¸€äº›äº‹ä»¶ï¼š

- `render` - æ¸²æŸ“æ—¶è§¦å‘ï¼Œç”¨äºæ¸²æŸ“è¯¥å®ä½“ï¼Œä¸å¯è§å®ä½“ä¸ä¼šè§¦å‘è¯¥äº‹ä»¶
- `update` - æ¯æ¬¡é€»è¾‘å¾ªç¯çš„æ›´æ–°äº‹ä»¶
- `beKilled` - è¢«å…¶å®ƒå®ä½“â€œå‡»æ€â€åè§¦å‘
- `onCollision` - ä¸å…¶å®ƒå®ä½“ç¢°æ’æ—¶è§¦å‘
- `onRemove` - å®ä½“è¢«ä»åœ°å›¾ä¸­ç§»é™¤åè§¦å‘

ã€€ã€€å®ä½“ä¸­è¿˜éœ€è¦å®ç°ä¸€äº›å·¥å…·å‡½æ•°ï¼š

- `getCollision` - è·å–å½“å‰å®ä½“æŒ‡å®šåŒºåŸŸå†…æ‰€æœ‰å…·æœ‰ç¢°æ’ä½“ç§¯çš„ç‚¹
- `copy` - æ·±æ‹·è´å½“å‰å¯¹è±¡

ã€€ã€€ä¸‹é¢æˆ‘ä»¬ç»™å‡ºä¸€ä¸ªä»£ç ç¤ºä¾‹ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªçŸ©å½¢å¯è§†å¯ç¢°æ’çš„å®ä½“ï¼ˆ `render` å‡½æ•°ä¸­çš„ä»£ç åé¢ä¼šè¯´æ˜ï¼‰ï¼š

**Kotlin**

```Kotlin
class BlockEntity(
    override var x: Int,
    override var y: Int,
    override val width: Int,
    override val height: Int
) : GEntity {
    
    override val collisible = true
    override var died = false
        private set

    override fun render(graphics: SafeGraphics) {
        graphics.fillRect('#', 0, 0, width, height)
    }

    override fun getCollision(x: Int, y: Int, width: Int, height: Int): Stream<Point2D> {
        val builder = Stream.builder<Point2D>()
        val right = x + width
        val bottom = y + height
        for (i in y until bottom) {
            for (k in x until right) {
                builder.add(Point2D(k, i))
            }
        }
        return builder.build()
    }

    override fun update(map: GMap, time: Long) {
        // do something
    }

    override fun beKilled(map: GMap, killer: GEntity) {
        died = true
    }
    
    override fun copy() = BlockEntity(x, y, width, height)

}
```

**Java**

```Java
public class BlockEntity implements GEntity {

    private boolean died = false;
    private int x;
    private int y;
    private final int width;
    private final int height;
    
    public BlockEntity(int x, int y, int width, int height) {
        this.x = x;
        this.y = y;
        this.width = width;
        this.height = height;
    }

    @Override
    public void render(@NotNull SafeGraphics graphics) {
        graphics.fillRect('#', 0, 0, width, height, -1);
    }

    @NotNull
    @Override
    public Stream<Point2D> getCollision(int x, int y, int width, int height) {
        Stream.Builder<Point2D> builder = Stream.builder();
        int right = x + width;
        int bottom = y + height;
        for (int i = y; y != bottom; ++y) {
            for (int k = x; k != right; ++k) {
                builder.add(new Point2D(k, i));
            }
        }
        return builder.build();
    }

    @Override
    public void update(@NotNull GMap map, long time) {
        // do something
    }

    @Override
    public void beKilled(@NotNull GMap map, @NotNull GEntity killer) {
        died = true;
    }

    @Override
    public boolean getCollisible() {
        return true;
    }

    @Override
    public boolean getDied() {
        return died;
    }

    @Override
    public int getX() {
        return x;
    }

    @Override
    public int getY() {
        return y;
    }

    @Override
    public int getWidth() {
        return width;
    }

    @Override
    public int getHeight() {
        return height;
    }

    @NotNull
    @Override
    public GEntity copy() {
        return new BlockEntity(x, y, width, height);
    }
    
}
```

## ğŸ–Šï¸ä½¿ç”¨ç”»ç¬” 

ã€€ã€€å¼•æ“æä¾›äº† `SafeGraphics` ç±»ç”¨æ¥ç»˜åˆ¶å›¾å½¢ï¼Œå…¶ä¸­å°è£…äº†åŸºç¡€çš„ç»˜åˆ¶å‡½æ•°ã€‚åŒæ—¶æ­£å¦‚å…¶åæ‰€è¯´çš„ä¸€æ ·ï¼Œè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªâ€œå®‰å…¨â€çš„ç”»ç¬”ç±»ï¼Œå®ƒå¯ä»¥ç¡®ä¿ç»˜åˆ¶çš„å†…å®¹ä¸ä¼šè¶…è¿‡ä¸ºå…¶è®¾å®šçš„è¾¹ç•Œã€‚

`GEntity#render` å‡½æ•°ä¼šæ¥æ”¶ä¸€ä¸ª `SafeGraphics` çš„å¯¹è±¡ï¼Œ `GMap` ä¼šè‡ªåŠ¨ä¸ºå…¶è®¾å®šå‚æ•°ï¼Œåœ¨å®ä½“ä¸­ä½¿ç”¨æ—¶ï¼Œè¯¥ç”»ç¬”çš„ç»˜åˆ¶åæ ‡æ˜¯ç›¸å¯¹äºå®ä½“æœ¬èº«çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨å¦‚ä¸‹ä»£ç ä¼šåœ¨å®ä½“çš„å·¦ä¸Šè§’ç»˜åˆ¶ä¸€ä¸ª `#` ï¼Œè€Œéæ˜¯åœ¨åœ°å›¾å·¦ä¸Šè§’ç»˜åˆ¶ï¼š

```
graphics.fillRect(#, 0, 0, 1, 1)
```

`SafeGraphics` ä¸­å¾ˆå¤šå‡½æ•°éƒ½æä¾›äº†ç¼ºçœå‚æ•°ï¼Œä¸è¿‡ç”±äº Java ä¸æ”¯æŒè¿™ä¸ªç‰¹æ€§ï¼Œæ‰€ä»¥å¦‚æœä½¿ç”¨ Java ç¼–å†™ä»£ç ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨å¡«å…¥æ‰€æœ‰å‚æ•°ã€‚

ã€€ã€€è‡³äºç»˜åˆ¶ä¸­æ‰€ç”¨åˆ°çš„ä¸€äº›æ¦‚å¿µå¦‚ä¸‹æ‰€ç¤ºï¼š

- ATTRï¼š è¿™æ˜¯ç”¨äºæ§åˆ¶ç»ˆç«¯å­—ä½“é¢œè‰²ã€èƒŒæ™¯é¢œè‰²ç­‰å±æ€§çš„å€¼ï¼Œæ‰€æœ‰æ”¯æŒçš„ç±»å‹å·²åœ¨ `ConsolePrinter` ä¸­åˆ—å‡ºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨è°ƒç”¨ `flush` å‡½æ•°æ—¶ï¼Œ åŒæ ·ä¸ä¼šæ¸…é™¤ä¸Šä¸€æ¬¡è®¾ç½®çš„ ATTR ä¿¡æ¯ã€‚
- â€ƒé™¤ clear ç³»åˆ—å‡½æ•°å¤–çš„æ‰€æœ‰å‡½æ•°ï¼Œä¼ å…¥ `attr = -1` è¡¨ç¤ºæ— æ•ˆ attrï¼Œæ‰“å°å†…å®¹æ—¶å°†å¿½ç•¥ attr ä¿¡æ¯ã€‚
- å­—ç¬¦å®½åº¦ï¼š åœ¨æ§åˆ¶å°ä¸­ï¼Œä¸åŒå­—ç¬¦å®½åº¦ä¸åŒï¼Œæ‹‰ä¸æ–‡å­—ç¬¦å®½åº¦ä¸º 1ï¼Œè€Œä¸­æ–‡å­—ç¬¦å®½åº¦ä¸º 2ï¼Œè®¡ç®—å­—ç¬¦å®½åº¦æ—¶ï¼Œæ»¡è¶³ `char < 0x100` çš„å®½åº¦è§†ä¸º 1ï¼Œå¦åˆ™ä¸º 2ã€‚

ã€€ã€€æ›´å¤šçš„å†…å®¹å¯ä»¥æŸ¥é˜… `ConsolePrinter` ç±»ä¸­çš„æ³¨é‡Šï¼Œå…¶ä¸­æœ‰è¯¦ç»†è¯´æ˜ã€‚

ã€€ã€€ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ `GMap` ç±»ä¼šè‡ªåŠ¨ä¸ºç”¨æˆ·ç”Ÿæˆç”»ç¬”ï¼Œå¹¶ä¸éœ€è¦ç”¨æˆ·è‡ªå·±åˆ›å»ºï¼Œä½†æ˜¯å¦‚æœæƒ³è¦æ‰‹åŠ¨åˆ›å»ºç”»ç¬”å¯¹è±¡çš„è¯å¯ä»¥å‚è€ƒä»¥ä¸‹ä»£ç ï¼š

**Kotlin**

```Kotlin
fun main() {
    GMap.Builder.apply {
        width = 80
        height = 40
        file = File("D:\\Workspace\\jni\\cmake-build-release\\libjni.dll")
    }.build().use {
        // åˆ›å»ºä¸€ä¸ªå’Œåœ°å›¾ç­‰å¤§çš„ç”»ç¬”
        val g1 = SafeGraphics(it)
        // åˆ›å»ºä¸€ä¸ªç»˜åˆ¶èµ·ç‚¹ä¸º (10, 5)ï¼Œç»˜åˆ¶åŒºåŸŸå¤§å°ä¸º 20x10 çš„ç”»ç¬”ï¼Œç»˜åˆ¶åŒºåŸŸå—åœ°å›¾å°ºå¯¸é™åˆ¶
        val g2 = SafeGraphics(it, 10, 5, 20, 10)
        // åˆ›å»ºä¸€ä¸ªç»˜åˆ¶èµ·ç‚¹ä¸º (10, 5)ï¼Œç»˜åˆ¶åŒºåŸŸå¤§å°ä¸º 20x10 çš„ç”»ç¬”ï¼Œç»˜åˆ¶åŒºåŸŸä¸å—ä»»ä½•é™åˆ¶
        val g3 = HalfSafeGraphics(10, 5, 20, 10, ConsolePrinter.index)
        // do something
    }
    GMap.Builder.dispose()
}
```

**Java**

```Java
public class Main {

    public static void main(String[] args) {
        GMap.BuilderJava.INSTANCE
                .setWidth(80)
                .setHeight(40);
        try (GMap map = GMap.Builder.build()) {
            // åˆ›å»ºä¸€ä¸ªå’Œåœ°å›¾ç­‰å¤§çš„ç”»ç¬”
            SafeGraphics g1 = SafeGraphics.createSafeGraphics(map);
            // åˆ›å»ºä¸€ä¸ªç»˜åˆ¶èµ·ç‚¹ä¸º (10, 5)ï¼Œç»˜åˆ¶åŒºåŸŸå¤§å°ä¸º 20x10 çš„ç”»ç¬”ï¼Œç»˜åˆ¶åŒºåŸŸå—åœ°å›¾å°ºå¯¸é™åˆ¶
            SafeGraphics g2 = SafeGraphics.createSafeGraphics(map, 10, 5, 20, 10);
            // åˆ›å»ºä¸€ä¸ªç»˜åˆ¶èµ·ç‚¹ä¸º (10, 5)ï¼Œç»˜åˆ¶åŒºåŸŸå¤§å°ä¸º 20x10 çš„ç”»ç¬”ï¼Œç»˜åˆ¶åŒºåŸŸä¸å—ä»»ä½•é™åˆ¶
            SafeGraphics g3 = SafeGraphics.createHalfSafeGraphics(10, 5, 20, 10, ConsolePrinter.getIndex());
            // do something
        }
        GMap.Builder.dispose();
    }

}
```

## â²ï¸æ—¶åºæ§åˆ¶ 

ã€€ã€€å¼•æ“æ”¯æŒç”¨æˆ·è‡ªå·±è¿›è¡Œæ—¶åºæ§åˆ¶ï¼Œä¹Ÿæ”¯æŒè®©å¼•æ“æ¥ç®¡æ‰€æœ‰æ—¶åºæ§åˆ¶ï¼Œè°ƒç”¨ `GMap#start` å³å¯ä½¿å¼•æ“æ¥ç®¡æ‰€æœ‰ä»»åŠ¡ã€‚

ã€€ã€€è¯·æ³¨æ„ï¼šå¦‚æœè®©å¼•æ“æ¥ç®¡æ—¶åºæ§åˆ¶ï¼Œé€»è¾‘ä»»åŠ¡å’Œäº‹ä»¶ä»»åŠ¡å°†ä¸åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ `GMap#runTaskOnLogicThread` å°†ä¸€ä¸ªä»»åŠ¡æ·»åŠ åˆ°é€»è¾‘çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œè¯¥å‡½æ•°æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚

ã€€ã€€ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š

**Kotlin**

```Kotlin
fun main() {
  GMap.Builder.apply {
    width = 80
    height = 40
  }.build().use { map ->
    EventListener.registryKeyboardEvent(object : IKeyboardListener {

      override fun onPressed(code: Int) {
        map.runTaskOnLogicThread {
          println("pressed: $code")
          true
        }
      }

      override fun onReleased(code: Int) {
        map.runTaskOnLogicThread {
          println("released: $code")
          true
        }
      }

      override fun onActive(code: Int) { }

    })
    map.start(10, 50) { true }
  }
  GMap.Builder.dispose()
}
```

**Java**

```Java
public class Main {

    public static void main(String[] args) {
        GMap.BuilderJava.INSTANCE
                .setWidth(80)
                .setHeight(40);
        try (GMap map = GMap.Builder.build()) {
            EventListener.registryKeyboardEvent(new IKeyboardListener() {

                @Override
                public void onPressed(int code) {
                    map.runTaskOnLogicThread(() -> {
                        System.out.println("pressed: $code");
                        return false;
                    });
                }

                @Override
                public void onReleased(int code) {
                    map.runTaskOnLogicThread(() -> {
                        System.out.println("released: $code");
                        return false;
                    });
                }

                @Override
                public void onActive(int code) { }

            });
            map.start(10, 50, () -> true);
        }
        GMap.Builder.dispose();
    }

}
```

ã€€ã€€ä»¥ä¸Šå°±æ˜¯å¼•æ“çš„åŸºæœ¬ç”¨æ³•ï¼Œä»£ç æ³¨é‡Šä¸­å·²ç»å°½é‡è¯¦ç»†çš„æè¿°ä»£ç çš„ç”¨æ³•å’Œæ³¨æ„äº‹é¡¹ï¼Œå¦‚æœå­˜æœ‰ç–‘é—®æ¬¢è¿æ issueã€‚
